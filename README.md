# Backend –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **nginx** –∏ **Docker**.

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx:

   ```shell
   cp seller-page.ddns.net.conf /etc/nginx/sites-available/seller-page.ddns.net.conf
    
   sudo ln -s /etc/nginx/sites-available/seller-page.ddns.net.conf /etc/nginx/sites-enabled/seller-page.ddns.net.conf
    
   sudo nginx -t
   sudo nginx -s reload
   ```

2. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É `8082` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞):

   ```shell
   docker build . -t seller-pages-image
    
   docker rm -f seller-pages-app 

   docker run --env-file ./.env \
      -v "data:/root/data" \
      --restart always \
      -p 80:8082 \
      -d --name seller-pages-app seller-pages-image:latest
   ```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `data/` ‚Äî —Ä–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

    * `*.json` ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã —Ç–æ–≤–∞—Ä–æ–≤.
    * `createdTokens.csv` ‚Äî –∂—É—Ä–Ω–∞–ª —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤. –§–æ—Ä–º–∞—Ç:

      ```
      iss;name;token_id;isTeacher
      ```

      –≥–¥–µ:

        * `iss` ‚Äî –∫—Ç–æ —Å–æ–∑–¥–∞–ª —Ç–æ–∫–µ–Ω,
        * `name` ‚Äî –∏–º—è –≤–Ω—É—Ç—Ä–∏ —Ç–æ–∫–µ–Ω–∞,
        * `token_id` ‚Äî UUID —Ç–æ–∫–µ–Ω–∞,
        * `isTeacher` ‚Äî `true/false`, –ø—Ä–∏–∑–Ω–∞–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è.
    * `bannedTokens.json` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ (–ø–æ `token_id`) –≤ —Ñ–æ—Ä–º–∞—Ç–µ –º–∞—Å—Å–∏–≤–∞ —Å—Ç—Ä–æ–∫. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

* `gen_token/` ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π.

    * –í –Ω–µ—ë –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è `claims.json` (–ø—Ä–∏–º–µ—Ä –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏).
    * –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ `private_key.hex`.
    * –°–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–µ—Ä–≤—ã–π —Ç–æ–∫–µ–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –∏ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ API.
    * –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏ –ø–µ—Ä–≤—ã–π —Ç–æ–∫–µ–Ω **–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ª–æ–≥–∞—Ö** –∏ **–Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∏–∫–æ–º—É**.

---

## üîë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏

* –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã.
* –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã.
* –¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

    * –î–æ–±–∞–≤–∏—Ç—å –µ–≥–æ `token_id` –≤ `data/bannedTokens.json`.
    * –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## üìò API

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`openapi.yaml`).

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

* –ü–µ—Ä–≤—ã–π —Ç–æ–∫–µ–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞—ë—Ç—Å—è **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —É—Ç–∏–ª–∏—Ç—É `gen_token`**.
* –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∏–∑ `private_key.hex` —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª–µ–Ω –∏ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
* –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π ‚Äî –æ–Ω–∏ –¥–∞—é—Ç –ø—Ä–∞–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã.
